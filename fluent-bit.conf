[SERVICE]
    Flush         5
    Daemon        off
    Log_Level     info
    HTTP_Server   On
    HTTP_Listen   0.0.0.0
    HTTP_Port     2020

# Input from Docker containers via fluentd protocol
[INPUT]
    Name          forward
    Listen        0.0.0.0
    Port          24224

# Optional: Output to local file for debugging
[OUTPUT]
    Name          file
    Match         powersync*
    Path          /var/log/
    File          powersync.log

# Output to New Relic
[OUTPUT]
    Name          http
    Match         powersync*
    Host          log-api.newrelic.com
    Port          443
    URI           /log/v1
    Header        Api-Key ${NEW_RELIC_LICENSE_KEY}
    Header        Content-Type application/json
    Format        json
    Json_date_key timestamp
    Json_date_format iso8601
    tls           on
    tls.verify    on